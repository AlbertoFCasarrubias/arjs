<html>
<head>
    <meta charset="utf-8">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
    <style>
        #playbutton_1{
            position: fixed;
            z-index: 999;
            width:auto;
            height: auto;
        }
    </style>
    <script>
      AFRAME.registerComponent("foo", {
        init: function () {
          this.el.addEventListener("click", (e) => {
            var win = window.open('player.html', '_blank');
            win.focus();
        })}
      });

      AFRAME.registerComponent("sams", {
        init: function () {
          this.el.addEventListener("click", (e) => {
            var win = window.open('https://www.sams.com.mx/desechables-e-insumos/platos-desechables-bosco-chicos-180-pzas/000369744?sp=platos', '_blank');
            win.focus();
        })}
      });

      AFRAME.registerComponent("playvideo", {
        init: function () {
          this.el.addEventListener("click", (e) => {
            const elem = document.getElementById("cakeVideo");
            elem.play();
        })}
      });
    </script>
</head>
<body>
<!--a id="playbutton_1" href="#">Test 8</a-->
<a-scene cursor="rayOrigin: mouse">
    <a-assets>
        <video id="sams" autoplay loop muted playsinline crossorigin="anonymous" src="assets/test6.mp4"> </video>
        <video id="cakeVideo" poster="assets/still_video.png" autoplay loop src="assets/cakeMute.mp4"> </video>
        <img id="fondo" src="assets/ficha.png">
        <img id="circle" src="assets/logoCirculo.png">
        <img id="btnVideo" src="assets/bnVideo.png">
        <img id="icon" src="assets/icon.png">
        <img id="gluten" src="assets/gluten.png">
        <img id="cacao" src="assets/cacao.png">
        <img id="lactosa" src="assets/lactosa.png">
        <img id="tutorial" src="assets/tutorial.png">
        <img id="moras" src="assets/moras.png">
        <img id="banner" src="assets/BANNER_CAKE.png">
        <img id="videoPlayer" src="assets/soporte_video.png">
        <img id="videoStill" src="assets/still_video.png">
    </a-assets>

    <a-entity>
        <a-text color="#713b10"
                align="center"
                baseline="top"
                rotation="0 180 0"
                position="0 1.32 1.4"
                font="assets/arialbd-msdf.json"
                width="3"
                negate="false"
                value="PASTEL DE DURAZNO" ></a-text>
        <a-text color="black"
                align="left"
                baseline="top"
                rotation="0 180 0"
                position="0.6 1.65 1.4"
                font="assets/arial-msdf.json"
                width="1.2"
                negate="false"
                value="PAN DE VAINILLA\n MIX DE TRES LECHES\n CREMA\n CHOCOLATE BLANCO" ></a-text>
        <a-text color="black"
                align="left"
                baseline="top"
                rotation="0 180 0"
                position="0.015 1.65 1.4"
                lineHeight="2"
                font="assets/arial-msdf.json"
                width="1.2"
                negate="false"
                value="MAZORCA DE CACAO\n DURAZNO EN ALMÍBAR\n PULPA DE DURAZNO\n BLUEBERRIES" ></a-text>
        <a-image material="alphaTest: 0.5" src="#gluten" position="0.037 1.05 1.4"  width="0.2" height=".2" rotation="0 180 0"></a-image>
        <a-image material="alphaTest: 0.5" src="#cacao" position="-0.18 1.05 1.4"  width="0.2" height=".2" rotation="0 180 0"></a-image>
        <a-image material="alphaTest: 0.5" src="#lactosa" position="-0.385 1.05 1.4"  width="0.2" height=".2" rotation="0 180 0"></a-image>
        <a-image material="alphaTest: 0.5" src="#moras" position="-0.6 1.05 1.4"  width="0.2" height=".2" rotation="0 180 0"></a-image>
        <a-image position="0 1.5 1.5" rotation="0 180 0" width="2" height="1.3" src="#fondo"></a-image>
    </a-entity>

    <!-- Using the asset management system. -->

    <a-image position="2.1 1.44 0.064" rotation="0 -90 0" width="4.4" height="3.1" src="#videoPlayer"></a-image>
    <a-video id="videoPlay" src="#cakeVideo" poster="assets/still_video.png" width="2" height="1.125"   position="2 1.5 0" rotation="0 -90 0" playvideo></a-video>

    <a-curvedimage src="#banner"  width="2" height="2" radius="2" theta-length="80" position="-1 1.5 0" rotation="0 -145 0" sams></a-curvedimage>

    <a-image src="#circle" position="0 -2 0"  width="6" height="6" rotation="90 180 0"></a-image>


    <a-sky src="#sams" rotation="0 90 0"></a-sky>
</a-scene>
<script>
  var promise = document.querySelector('#sams').play();
  if (promise !== undefined) {
    promise.catch(error => {
      console.log("CACTH");

      window.addEventListener('click', function () {
        var v = document.querySelector('#sams');
        v.play();
      });

  }).then(() => {
      // Auto-play started
    });
  }


  /*
  document.querySelector('#btnVideo')
    .addEventListener('click', function()
    {
      console.log('CLICK');
      var win = window.open('player.html', '_blank');
      win.focus();
    });

   */



</script>
</body>
</html>
